(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{87536:function(e,l,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trading",function(){return n(56645)}])},27023:function(e,l,n){"use strict";var t=n(85893),o=n(3779),a=n(2593),r=n(17988),s=n(3718),i=n(77349);let d=e=>{let{title:l,value:n,setValue:d,decimalsShift:c,children:u}=e;return(0,t.jsxs)(r.Z.Group,{controlId:"_",children:[(0,t.jsx)(r.Z.ControlLabel,{children:l}),(0,t.jsxs)(s.Z,{style:{marginTop:5,marginBottom:5},children:[(0,t.jsx)(s.Z.Button,{onClick:()=>d(new o.Z(n.amount.sub(a.O$.from(10).pow(n.decimals+c)),n.decimals)),children:"-"}),(0,t.jsx)(i.Z,{className:"no-arrows-input-number",step:.1,value:n.toHumanString(18),onChange:e=>d(o.Z.fromString("string"==typeof e?e:e.toString(),n.decimals))}),(0,t.jsx)(s.Z.Button,{onClick:()=>d(new o.Z(n.amount.add(a.O$.from(10).pow(n.decimals+c)),n.decimals)),children:"+"})]}),u]})};l.Z=d},55581:function(e,l,n){"use strict";var t=n(85893),o=n(74855),a=n(17006),r=n(7158),s=n(89884),i=n(50053),d=n(58918),c=n(13289),u=n(81),h=n(67294),m=n(6213),x=n(41664),p=n.n(x);let j=h.forwardRef((e,l)=>{let{as:n,href:o,...a}=e;return(0,t.jsx)(p(),{href:o,as:n,legacyBehavior:!0,children:(0,t.jsx)("a",{ref:l,...a})})}),Z={padding:"0 15px 0 15px",color:"#FFF"},g=()=>{let[e,l]=h.useState("ethereum");return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(m.J.Provider,{value:m.Z[e],children:[(0,t.jsx)(d.Z,{size:"lg",label:"Network",data:v,style:{width:300,minWidth:250},onChange:l,cleanable:!1,defaultValue:e,searchable:!1}),"\xa0",(()=>{let l=m.Z[e].showWallet(),n=m.Z[e].connectButton(),o=(0,t.jsxs)(i.Z,{color:"green",appearance:"ghost",style:{borderColor:"#6474a7",color:"rgba(255, 255, 255, 0.9"},children:[null==l?void 0:l.network_currency_symbol,"\xa0",null==l?void 0:l.network_currency_amount,"\xa0(",null==l?void 0:l.address.slice(0,5),"..",null==l?void 0:l.address.slice((null==l?void 0:l.address.length)-5,null==l?void 0:l.address.length),")"]});return(0,t.jsx)("div",{children:l?o:n})})()]})})},v=[{label:(0,t.jsx)("span",{children:"Aurora (testnet)"}),value:"ethereum"}],b=e=>{let{children:l,active:n,...i}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.Z,{style:{backgroundColor:"#21273a"},children:[(0,t.jsxs)(u.Z,{activeKey:n,children:[(0,t.jsx)(u.Z.Item,{as:j,href:"/",active:"home"==n,style:Z,icon:(0,t.jsx)(o.Z,{}),children:"Home"}),(0,t.jsx)(u.Z.Item,{as:j,href:"/trading",active:"trading"==n,style:Z,icon:(0,t.jsx)(s.Z,{}),children:"Trading"}),(0,t.jsx)(u.Z.Item,{as:j,href:"/rusd",active:"rusd"==n,style:Z,icon:(0,t.jsx)(a.Z,{}),children:"Mint/Burn rUSD"}),(0,t.jsx)(u.Z.Item,{as:j,href:"/faucet",active:"faucet"==n,style:Z,icon:(0,t.jsx)(r.Z,{}),children:"Faucet"})]}),(0,t.jsx)(u.Z,{pullRight:!0,children:(0,t.jsx)(u.Z.Item,{children:(0,t.jsx)(g,{})})})]}),l]})};l.Z=b},6213:function(e,l,n){"use strict";n.d(l,{J:function(){return r}});var t=n(67294),o=n(33965);let a={ethereum:new o.Z},r=t.createContext(a.ethereum);l.Z=a},56645:function(e,l,n){"use strict";n.r(l),n.d(l,{default:function(){return I}});var t=n(85893),o=n(55581),a=n(6213),r=n(3779),s=n(2593),i=n(35553),d=n(67294),c=n(40492),u=n(3365),h=n(39987),m=n(17988),x=n(58918),p=n(3718),j=n(77349),Z=n(4647),g=n(50053),v=n(22543),b=n(4934),S=n(27023),w=n(20901);let y=()=>{var e,l;let n=d.useContext(a.J),o=(0,u.Z)(),i=n.getRusdBalance(),c=n.getRusdLoanAllowance(),v=n.minLoanColateralRatio(),b=n.getAvailableSynths(),[S,y]=d.useState(null!==(l=null==b?void 0:null===(e=b[b.length-1])||void 0===e?void 0:e.address)&&void 0!==l?l:"0x0"),[f,C]=d.useState(new r.Z(s.O$.from(0),18)),[H,k]=d.useState(new r.Z(s.O$.from(0),18)),B=n.getSynthBalance(S),R=n.synthPrice(S),I=n.predictBorrowCollateralRatio(void 0,S,f,H,!0),T=n.borrowSynthCallback(S,f,H,(0,w.lZ)(o)),_=n.setRusdLoanAllowanceCallback(H,(0,w.lZ)(o));return(0,t.jsx)(h.Z,{bordered:!0,shaded:!0,header:"Borrowing",children:(0,t.jsxs)("div",{style:{textAlign:"left"},children:[(0,t.jsx)(m.Z.Group,{children:(0,t.jsx)(x.Z,{label:"Synth",data:b.map(e=>({label:e.fullName,value:e.address})),block:!0,onChange:y,defaultValue:S})}),(0,t.jsx)("br",{}),(0,t.jsxs)(m.Z.Group,{controlId:"_",children:[(0,t.jsx)(m.Z.ControlLabel,{children:"Borrow amount (synth)"}),(0,t.jsxs)(p.Z,{style:{marginTop:5,marginBottom:5},children:[(0,t.jsx)(p.Z.Button,{onClick:()=>C(new r.Z(f.amount.sub(s.O$.from(10).pow(f.decimals+1)),f.decimals)),children:"-"}),(0,t.jsx)(j.Z,{className:"no-arrows-input-number",value:f.toHumanString(2),onChange:e=>C(r.Z.fromString("string"==typeof e?e:e.toString(),f.decimals))}),(0,t.jsx)(p.Z.Button,{onClick:()=>C(new r.Z(f.amount.add(s.O$.from(10).pow(f.decimals+1)),f.decimals)),children:"+"})]}),(0,t.jsxs)(m.Z.HelpText,{children:["Balance: ",null==B?void 0:B.toHumanString(4)," (price: ",null==R?void 0:R.toHumanString(6),"$)"]})]}),(0,t.jsx)("br",{}),(0,t.jsxs)(m.Z.Group,{controlId:"_",children:[(0,t.jsx)(m.Z.ControlLabel,{children:"Pledge amount (rUSD)"}),(0,t.jsxs)(p.Z,{style:{marginTop:5,marginBottom:5},children:[(0,t.jsx)(p.Z.Button,{onClick:()=>k(new r.Z(H.amount.sub(s.O$.from(10).pow(H.decimals+1)),H.decimals)),children:"-"}),(0,t.jsx)(j.Z,{className:"no-arrows-input-number",value:H.toHumanString(18),onChange:e=>k(r.Z.fromString("string"==typeof e?e:e.toString(),H.decimals))}),(0,t.jsx)(p.Z.Button,{onClick:()=>k(new r.Z(H.amount.add(s.O$.from(10).pow(H.decimals+1)),H.decimals)),children:"+"})]}),(0,t.jsxs)(m.Z.HelpText,{children:["Balance: ",null==i?void 0:i.toHumanString(4)]}),(0,t.jsxs)(m.Z.HelpText,{children:["Allowance: ",null==c?void 0:c.toHumanString(4)]})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)(m.Z.HelpText,{children:["New C-ratio: ",I,"%"]}),(0,t.jsxs)(m.Z.HelpText,{children:["Min C-ratio: ",v,"%"]}),(0,t.jsx)("br",{}),(0,t.jsxs)(Z.Z,{justified:!0,children:[(0,t.jsx)(g.Z,{style:{borderColor:"#f26d9e",color:"#f26d9e",borderWidth:2},disabled:parseFloat(null==c?void 0:c.toHumanString(18))>=parseFloat(null==H?void 0:H.toHumanString(18)),async onClick(){_()},appearance:"ghost",children:(0,t.jsx)("b",{children:"Approve"})}),(0,t.jsx)(g.Z,{style:{borderColor:"#f26d9e",color:"#f26d9e",borderWidth:2},async onClick(){T()},disabled:parseFloat(null==c?void 0:c.toHumanString(18))<parseFloat(null==H?void 0:H.toHumanString(18)),appearance:"ghost",children:(0,t.jsx)("b",{children:"Borrow"})})]})]})})},f=()=>{var e;let l=d.useContext(a.J),n=(0,u.Z)(),o=l.userLoans(),[i,c]=d.useState(void 0),[p,j]=d.useState(new r.Z(s.O$.from(0),18)),Z=null==o?void 0:o.find(e=>e.borrowId===i),v=l.predictBorrowCollateralRatio(i,null!==(e=null==Z?void 0:Z.synthAddress)&&void 0!==e?e:"0x0",new r.Z(s.O$.from(0),18),p,!1),b=l.withdrawLoanCallback(i,p,(0,w.lZ)(n));return(0,t.jsxs)(h.Z,{bordered:!0,shaded:!0,header:"Withdraw collateral from a loan",children:[(0,t.jsx)("p",{children:"Select your borrow"}),(0,t.jsx)(x.Z,{block:!0,size:"lg",label:"Borrow",data:(null!=o?o:[]).filter(e=>"rUSD"!==e.synthSymbol).map(e=>({label:"".concat(e.borrowId.slice(0,9)," (").concat(e.collateral.toHumanString(2)," rUSD & ").concat(e.borrowedSynthAmount.toHumanString(5)," ").concat(e.synthSymbol,", ratio: ").concat(e.collateralRation,"% over min ").concat(e.minCollateralRatio,"%)"),value:e.borrowId})),onChange:c,cleanable:!1,style:{marginTop:5},defaultValue:i}),(0,t.jsx)("br",{}),(0,t.jsxs)(S.Z,{title:"Amount to withdraw (rUSD)",value:p,setValue:j,decimalsShift:1,children:[(0,t.jsxs)(m.Z.HelpText,{children:["New C-Ratio: ",v,"%"]}),(0,t.jsxs)(m.Z.HelpText,{children:["Min C-Ratio: ",null==Z?void 0:Z.minCollateralRatio,"%"]})]}),(0,t.jsx)("br",{}),(0,t.jsx)(g.Z,{block:!0,disabled:void 0===i,appearance:"primary",style:{backgroundColor:void 0==i?"#48738a":"#2e6585"},async onClick(){b()},children:"Withdraw"})]})},C=()=>{var e;let l=d.useContext(a.J),n=(0,u.Z)(),o=l.userLoans(),[i,c]=d.useState(void 0),[p,j]=d.useState(new r.Z(s.O$.from(0),18)),Z=null==o?void 0:o.find(e=>e.borrowId===i),v=l.predictBorrowCollateralRatio(i,null!==(e=null==Z?void 0:Z.synthAddress)&&void 0!==e?e:"0x0",p,new r.Z(s.O$.from(0),18),!1),b=l.repayLoanCallback(i,p,(0,w.lZ)(n));return(0,t.jsxs)(h.Z,{bordered:!0,shaded:!0,header:"Repay a borrow",children:[(0,t.jsx)("p",{children:"Select your borrow"}),(0,t.jsx)(x.Z,{block:!0,size:"lg",label:"Borrow",data:(null!=o?o:[]).filter(e=>"rUSD"!==e.synthSymbol).map(e=>({label:"".concat(e.borrowId.slice(0,9)," (").concat(e.collateral.toHumanString(2)," rUSD & ").concat(e.borrowedSynthAmount.toHumanString(5)," ").concat(e.synthSymbol,", ratio: ").concat(e.collateralRation,"% over min ").concat(e.minCollateralRatio,"%)"),value:e.borrowId})),onChange:c,cleanable:!1,style:{marginTop:5},defaultValue:i}),(0,t.jsx)("br",{}),(0,t.jsxs)(S.Z,{title:"Amount to repay (synth)",value:p,setValue:j,decimalsShift:1,children:[(0,t.jsxs)(m.Z.HelpText,{children:["New C-Ratio: ",v,"%"]}),(0,t.jsxs)(m.Z.HelpText,{children:["Min C-Ratio: ",null==Z?void 0:Z.minCollateralRatio,"%"]})]}),(0,t.jsx)("br",{}),(0,t.jsx)(g.Z,{block:!0,disabled:void 0===i,appearance:"primary",style:{backgroundColor:void 0==i?"#8a7f48":"#85782e"},async onClick(){b()},children:"Repay"})]})},H=()=>{var e;let l=d.useContext(a.J),n=(0,u.Z)(),o=l.userLoans(),i=l.getRusdLoanAllowance(),[c,p]=d.useState(void 0),[j,v]=d.useState(new r.Z(s.O$.from(0),18)),b=null==o?void 0:o.find(e=>e.borrowId===c),y=l.predictBorrowCollateralRatio(c,null!==(e=null==b?void 0:b.synthAddress)&&void 0!==e?e:"0x0",new r.Z(s.O$.from(0),18),j,!0),f=l.setRusdLoanAllowanceCallback(j,(0,w.lZ)(n)),C=l.depositLoanCallback(c,j,(0,w.lZ)(n));return(0,t.jsxs)(h.Z,{bordered:!0,shaded:!0,header:"Depostit collateral to a loan",children:[(0,t.jsx)("p",{children:"Select your borrow"}),(0,t.jsx)(x.Z,{block:!0,size:"lg",label:"Borrow",data:(null!=o?o:[]).filter(e=>"rUSD"!==e.synthSymbol).map(e=>({label:"".concat(e.borrowId.slice(0,9)," (").concat(e.collateral.toHumanString(2)," rUSD & ").concat(e.borrowedSynthAmount.toHumanString(5)," ").concat(e.synthSymbol,", ratio: ").concat(e.collateralRation,"% over min ").concat(e.minCollateralRatio,"%)"),value:e.borrowId})),onChange:p,cleanable:!1,style:{marginTop:5},defaultValue:c}),(0,t.jsx)("br",{}),(0,t.jsxs)(S.Z,{title:"Amount to deposit (rUSD)",value:j,setValue:v,decimalsShift:1,children:[(0,t.jsxs)(m.Z.HelpText,{children:["Allowance: ",null==i?void 0:i.toHumanString(2)]}),(0,t.jsxs)(m.Z.HelpText,{children:["New C-Ratio: ",y,"%"]}),(0,t.jsxs)(m.Z.HelpText,{children:["Min C-Ratio: ",null==b?void 0:b.minCollateralRatio,"%"]})]}),(0,t.jsx)("br",{}),(0,t.jsxs)(Z.Z,{justified:!0,children:[(0,t.jsx)(g.Z,{appearance:"primary",style:{backgroundColor:void 0==c?"#8a5e48":"#854c2e"},async onClick(){f()},disabled:parseFloat(null==i?void 0:i.toHumanString(18))>=parseFloat(null==j?void 0:j.toHumanString(18))||void 0===c,children:"Approve"}),(0,t.jsx)(g.Z,{disabled:parseFloat(null==i?void 0:i.toHumanString(18))<parseFloat(null==j?void 0:j.toHumanString(18))||void 0===c,appearance:"primary",style:{backgroundColor:void 0==c?"#8a5e48":"#854c2e"},async onClick(){C()},children:"Deposit"})]})]})},k=()=>{var e,l,n,o,c,Z,v,b;let S=d.useContext(a.J),y=(0,u.Z)(),f=S.getAvailableSynths(),[C,H]=d.useState(new r.Z(s.O$.from(0),18)),[k,B]=d.useState(new r.Z(s.O$.from(0),18)),[R,I]=d.useState("swapFrom"),[T,_]=d.useState(null!==(v=null==f?void 0:null===(e=f[0])||void 0===e?void 0:e.address)&&void 0!==v?v:"0x0"),[F,A]=d.useState(null!==(b=null==f?void 0:null===(l=f[f.length-1])||void 0===l?void 0:l.address)&&void 0!==b?b:"0x0"),$=S.getSynthBalance(T),O=S.getSynthBalance(F),N=S.synthPrice(T),L=S.synthPrice(F),D=S.swapSynthCallback(R,T,F,"swapFrom"===R?C:k,(0,w.lZ)(y));return(0,t.jsxs)(h.Z,{bordered:!0,shaded:!0,header:"Swap Synthes",children:[(0,t.jsxs)(m.Z.Group,{controlId:"_",children:[(0,t.jsxs)(p.Z,{style:{marginBottom:5},children:[(0,t.jsx)(j.Z,{placeholder:"From",step:1e-5,onChange(e){let l=r.Z.fromString("string"==typeof e?e:e.toString(),18);H(l),I("swapFrom");let n=(null==N?void 0:N.amount)/(null==L?void 0:L.amount),t=i.parseUnits((n*parseFloat(l.toHumanString(18))).toString(),18);B(new r.Z(t,18))},value:C.toHumanString(18)}),(0,t.jsx)(p.Z.Button,{className:"selector-in-input",children:(0,t.jsx)(x.Z,{size:"sm",label:"Synth",data:f.map(e=>({label:e.fullName,value:e.address})),onChange(e){_(e),H(new r.Z(s.O$.from(0),18)),B(new r.Z(s.O$.from(0),18))},defaultValue:null==f?void 0:null===(n=f[0])||void 0===n?void 0:n.address})})]}),(0,t.jsxs)(m.Z.HelpText,{children:["Balance: ",null==$?void 0:$.toHumanString(5)," (price: ",null==N?void 0:N.toHumanString(6),"$)"]})]}),(0,t.jsx)("br",{}),(0,t.jsxs)(m.Z.Group,{controlId:"_",children:[(0,t.jsxs)(p.Z,{style:{marginBottom:5},children:[(0,t.jsx)(j.Z,{step:1e-5,placeholder:"To",onChange(e){let l=r.Z.fromString("string"==typeof e?e:e.toString(),18);B(l),I("swapTo");let n=(null==L?void 0:L.amount)/(null==N?void 0:N.amount),t=i.parseUnits((n*parseFloat(l.toHumanString(18))).toString(),18);H(new r.Z(t,18))},value:k.toHumanString(18)}),(0,t.jsx)(p.Z.Button,{className:"selector-in-input",children:(0,t.jsx)(x.Z,{size:"sm",label:"Synth",data:(null!=f?f:[]).map(e=>({label:e.fullName,value:e.address})),onChange(e){A(e),B(new r.Z(s.O$.from(0),18)),H(new r.Z(s.O$.from(0),18))},defaultValue:null==f?void 0:null===(o=f[f.length-1])||void 0===o?void 0:o.address})})]}),(0,t.jsxs)(m.Z.HelpText,{children:["Balance: ",null==O?void 0:O.toHumanString(5)," (price: ",null==L?void 0:L.toHumanString(6),"$)"]})]}),(0,t.jsx)("br",{}),(0,t.jsx)(g.Z,{color:"yellow",appearance:"ghost",block:!0,style:{marginBottom:7,borderWidth:2},onClick:async()=>D(),children:(0,t.jsx)("b",{children:"Swap"})}),(0,t.jsxs)(m.Z.HelpText,{children:["Price: 2323.33 (",null===(c=null==f?void 0:f.find(e=>e.address===F))||void 0===c?void 0:c.fullName," in ",null===(Z=f.find(e=>e.address===T))||void 0===Z?void 0:Z.fullName,")"]})]})},B=e=>{let{synthAddress:l,...n}=e,o=d.useContext(a.J),r=o.totalShorts(l),s=o.totalLongs(l),i=parseFloat(null==r?void 0:r.toHumanString(18))/(parseFloat(null==s?void 0:s.toHumanString(18))+parseFloat(null==r?void 0:r.toHumanString(18)));return(0,t.jsxs)(v.Z,{style:{paddingTop:5,paddingLeft:25},justify:"space-between",children:[(0,t.jsx)(v.Z.Item,{style:{paddingTop:4},colspan:1,children:(0,t.jsx)("h5",{children:"Skew:"})}),(0,t.jsx)(v.Z.Item,{colspan:21,children:(0,t.jsx)(b.Z.Line,{percent:Math.round((1-i)*100),strokeColor:"#1d5f5e",trailColor:"#82363a"})})]})},R=()=>{var e,l,n;let o=d.useContext(a.J),r=o.getAvailableSynths(),[s,i]=d.useState(null!==(n=null==r?void 0:null===(e=r[r.length-1])||void 0===e?void 0:e.address)&&void 0!==n?n:"0x0");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(v.Z,{justify:"space-between",children:[(0,t.jsx)(v.Z.Item,{colspan:18,children:(0,t.jsxs)(v.Z,{style:{flexDirection:"column",alignItems:"center"},justify:"space-between",children:[(0,t.jsx)(v.Z.Item,{colspan:23,children:(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(v.Z.Item,{colspan:8,children:(0,t.jsx)(x.Z,{size:"lg",label:"Synth",data:r.filter(e=>"rUSD"!==e.symbol).map(e=>({label:e.fullName,value:e.address})),style:{width:300,minWidth:250},onChange:i,defaultValue:s})}),(0,t.jsx)(v.Z.Item,{colspan:16,children:(0,t.jsx)(B,{synthAddress:s})})]})}),(0,t.jsx)("br",{}),(0,t.jsx)(v.Z.Item,{colspan:23,children:(0,t.jsx)(c.rJ,{height:780,width:"auto",theme:"dark",symbol:null===(l=r.find(e=>e.address===s))||void 0===l?void 0:l.tradingViewSymbol,allow_symbol_change:!1,container_id:"tradingview_aaab4"})})]})}),(0,t.jsxs)(v.Z.Item,{colspan:6,children:[(0,t.jsx)(k,{}),(0,t.jsx)("br",{}),(0,t.jsx)(y,{})]})]}),(0,t.jsxs)("div",{style:{marginTop:10,marginBottom:30},children:[(0,t.jsxs)(v.Z,{justify:"space-around",children:[(0,t.jsx)(v.Z.Item,{colspan:11,children:(0,t.jsx)(C,{})}),(0,t.jsx)(v.Z.Item,{colspan:11,children:(0,t.jsx)(f,{})})]}),(0,t.jsx)("br",{})]}),(0,t.jsx)("div",{style:{marginLeft:40,marginRight:40},children:(0,t.jsx)(H,{})}),(0,t.jsx)("br",{})]})};function I(){return(0,t.jsx)(o.Z,{active:"trading",children:(0,t.jsx)("div",{style:{paddingTop:25,paddingRight:25},children:(0,t.jsx)(R,{})})})}}},function(e){e.O(0,[801,681,632,774,888,179],function(){return e(e.s=87536)}),_N_E=e.O()}]);